import discord
from discord.ext import commands
import random
import datetime

intents = discord.Intents.default()
intents.message_content = True

bot = commands.Bot(command_prefix='$', intents=intents)

# Recomendaciones ambientales
acciones_reduccion = [
    "Evita comprar agua en botellas plásticas, usa un termo reutilizable.",
    "Compra productos a granel para reducir empaques.",
    "Reutiliza frascos de vidrio para guardar alimentos.",
    "Crea compost con tus residuos orgánicos.",
    "Repara objetos antes de reemplazarlos, especialmente textiles."
]

acciones_energia = [
    "Desconecta electrodomésticos cuando no estén en uso.",
    "Utiliza focos LED y aprovecha luz natural.",
    "Plancha ropa en lotes para optimizar energía.",
    "Evita usar la secadora, seca al aire libre.",
    "Cambia a electrodomésticos con certificación de bajo consumo."
]

acciones_agua = [
    "Dúchate máximo 5 minutos.",
    "Junta agua de lluvia para plantas.",
    "Riega en las noches para evitar evaporación.",
    "Arregla fugas apenas las notes.",
    "Usa una botella con arena en el tanque del inodoro para reducir consumo."
]

@bot.event
async def on_ready():
    print(f'Bot conectado como {bot.user}')

# Función de ayuda personalizada
@bot.command(name="ayuda")
async def ayuda(ctx):
    mensaje = (
        "**GUÍA DE COMANDOS - BOT ECO HOGAR**\n\n"
        "**$reducir** → Consejos para reducir residuos en casa.\n"
        "**$energia** → Acciones para gastar menos electricidad.\n"
        "**$agua** → Sugerencias para cuidar el consumo de agua.\n"
        "**$horario** → Muestra la hora actual (útil para programar hábitos).\n"
        "**$imagen1** | **$imagen2** → Envía imágenes relacionadas al reciclaje.\n"
        "\nEste bot tiene como objetivo ayudarte a disminuir la contaminación desde casa, "
        "con cambios pequeños pero consistentes."
    )
    await ctx.send(mensaje)

@bot.command(name="reducir")
async def reducir(ctx):
    accion = random.choice(acciones_reduccion)
    await ctx.send(f"Recomendación para reducir residuos en casa:\n{accion}")

@bot.command(name="energia")
async def energia(ctx):
    accion = random.choice(acciones_energia)
    await ctx.send(f"Consejo para disminuir consumo de electricidad:\n{accion}")

@bot.command(name="agua")
async def agua(ctx):
    accion = random.choice(acciones_agua)
    await ctx.send(f"Estrategia para ahorrar agua en el hogar:\n{accion}")

@bot.command(name="horario")
async def horario(ctx):
    hora_actual = datetime.datetime.now().strftime("%H:%M:%S")
    await ctx.send(f"La hora actual es: {hora_actual}")

@bot.command(name="imagen1")
async def imagen1(ctx):
    with open('./images/1.png', 'rb') as f:
        picture = discord.File(f)
    await ctx.send(file=picture)

@bot.command(name="imagen2")
async def imagen2(ctx):
    with open('./images/2.png', 'rb') as f:
        picture = discord.File(f)
    await ctx.send(file=picture)

bot.run('your token here')
